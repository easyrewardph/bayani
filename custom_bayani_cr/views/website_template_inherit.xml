<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="filter_products_price_inherit" inherit_id="website_sale.filter_products_price">
        <xpath expr="//div[@id='o_wsale_price_range_option']" position="attributes">
            <attribute name="t-if">
                user_id.id != request.env.ref('base.public_user').id
            </attribute>
        </xpath>
    </template>
    <template id="price_inherit_template" inherit_id="website_sale.product_price">
        <xpath expr="//div[contains(@t-attf-class, 'product_price')]" position="attributes">
            <attribute name="t-if">
                user_id.id != request.env.ref('base.public_user').id
            </attribute>
        </xpath>
    </template>
    <template id="quantity_custom" inherit_id="website_sale.product_quantity">
        <xpath expr="//div[contains(@t-attf-class, 'css_quantity input-group')]" position="attributes">
            <attribute name="t-if">
                user_id.id != request.env.ref('base.public_user').id
            </attribute>
        </xpath>
    </template>
    <template id="product_custom" inherit_id="website_sale.product">
        <xpath expr="//a[@id='add_to_cart']" position="attributes">
            <attribute name="t-if">
                user_id.id != request.env.ref('base.public_user').id
            </attribute>
        </xpath>

        <!-- Added Expiry-date, Weight and volume in product page-->
        <xpath expr="//div[@id='o_product_terms_and_share']" position="before">
            <div class="mb-1">
                <tr>
                    <br/>
                    <span>
                        <strong>Expiry Date :</strong>
                    </span>
                    <td t-if="product.get_nearest_expiry_lot()">
                        <strong>
                            <span t-esc="product.get_nearest_expiry_lot().strftime('%d-%b-%Y')"/>
                        </strong>
                    </td>
                </tr>
                <br/>
                <!--                <tr>-->
                <!--                    <span>Weight :</span>-->
                <!--                    <td>-->
                <!--                        <span t-field="product.weight"/>-->
                <!--                        <span t-esc="product.weight_uom_name"/>-->
                <!--                    </td>-->
                <!--                </tr>-->
                <!--                <br/>-->
                <!--                <tr>-->
                <!--                    <span>Volume :</span>-->
                <!--                    <td>-->
                <!--                        <span t-field="product.volume"/>-->
                <!--                        <span t-esc="product.volume_uom_name"/>-->
                <!--                    </td>-->
                <!--                </tr>-->

            </div>
        </xpath>

        <xpath expr="//div[@id='o_product_terms_and_share']" position="after">
            <div class="mt-0">
                <span t-attf-class="available-qty-button">Available Qty :
                    <t t-esc="int(product.qty_available)"/>
                </span>
            </div>
        </xpath>
    </template>
    <template id="custom_product_price" inherit_id="website_sale.products_item" priority="15">
        <xpath expr="//div[hasclass('product_price')]" position="attributes">
            <attribute name="t-if">
                user_id.id != request.env.ref('base.public_user').id
            </attribute>
        </xpath>

        <!-- Below Xpath for Added Qty Selector in Product List View-->
        <xpath expr="//div[hasclass('o_wsale_product_btn')]" position="inside">
            <t t-set="combination" t-value="product._get_first_possible_combination()"/>
            <t t-set="combination_info" t-value="product._get_combination_info(combination, add_qty=add_qty)"/>
            <div t-if="user_id.id != request.env.ref('base.public_user').id" t-attf-class="custom_selector_qty css_quantity input-group {{'d-none' if combination_info['prevent_zero_price_sale'] else 'd-inline-flex'}} me-2 align-middle"
                 contenteditable="false">
                <a t-attf-href="#" class="btn btn-link js_add_cart_json" aria-label="Remove one" title="Remove one">
                    <i class="fa fa-minus"></i>
                </a>
                <input type="text" class="form-control quantity text-center" data-min="1" name="add_qty"
                       t-att-value="add_qty or 1"/>
                <a t-attf-href="#" class="btn btn-link float_left js_add_cart_json" aria-label="Add one"
                   title="Add one">
                    <i class="fa fa-plus"></i>
                </a>
            </div>
        </xpath>

    </template>

    <!--    Remove Price From Wishlist while access website through (Public User)-->
    <template id="custom_product_wishlist" inherit_id="website_sale_wishlist.product_wishlist">
        <xpath expr="//t[@t-foreach='wishes']//tr//td[3]" position="replace">
            <td class="align-middle"
                t-if="combination_info['prevent_zero_price_sale'] and user_id.id != request.env.ref('base.public_user').id">
                <span t-field="website.prevent_zero_price_sale_text"/>
            </td>
        </xpath>
        <xpath expr="//td[@t-else='']" position="replace">
            <td class="align-middle o_wish_price" t-elif="user_id.id != request.env.ref('base.public_user').id">
                <t t-out="combination_info['price']"
                   t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                <small t-if="combination_info['base_unit_price']"
                       class="cart_product_base_unit_price d-block text-muted"
                       groups="website_sale.group_show_uom_price">
                    <t t-call='website_sale.base_unit_price'>
                        <t t-set='product' t-value='wish.product_id'/>
                    </t>
                </small>
            </td>
        </xpath>
    </template>


    <!--    Search Panel Hide based on condition in website Configuration (Web view)-->
    <template id="template_header_sidebar_bayani" inherit_id="website.template_header_sidebar">
        <xpath expr="//t[@t-call='website.placeholder_header_search_box']" position="replace">
            <t t-call="website.placeholder_header_search_box" t-if="website.is_search_panel_shown_in_website">
                <t t-set="_classes" t-valuef="mb-3"/>
                <t t-set="_input_classes" t-valuef="rounded-start-pill ps-3 text-bg-light"/>
                <t t-set="_submit_classes" t-valuef="rounded-end-pill pe-3 bg-o-color-3"/>
                <t t-set="limit" t-valuef="0"/>
            </t>
        </xpath>
    </template>

    <!--    Search Panel Hide based on condition in website Configuration (Mobile view)-->
    <template id="template_header_mobile_bayani" inherit_id="website.template_header_mobile">
        <xpath expr="//t[@t-call='website.placeholder_header_search_box']" position="replace">
            <t t-call="website.placeholder_header_search_box" t-if="website.is_search_panel_shown_in_website">
                <t t-set="_classes" t-valuef="mb-3"/>
                <t t-set="_input_classes" t-valuef="rounded-start-pill ps-3 text-bg-light"/>
                <t t-set="_submit_classes" t-valuef="rounded-end-pill pe-3 bg-o-color-3"/>
                <t t-set="limit" t-valuef="0"/>
            </t>
        </xpath>
    </template>


</odoo>


